
<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Dyktando: Wielka i mała litera – klasa 2</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Fredoka', sans-serif;
            background-color: #e6f9f9;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 800px;
            margin: 40px auto;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            background: linear-gradient(to right, #4ac6e0, #5bd0b5);
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 10px 10px 0 0;
            margin-top: 0;
        }
        .text-section {
            padding: 20px;
            font-size: 18px;
            line-height: 1.6;
        }
        .text-section select {
            font-size: 16px;
        }
        .buttons {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        .buttons button {
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .green { background-color: #4CAF50; color: white; }
        .blue { background-color: #2196F3; color: white; }
        .yellow { background-color: #FFB300; color: white; }
        .correct { background-color: #c8e6c9; }
        .incorrect { background-color: #ffcdd2; }
        .summary {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Dyktando: Wielka i mała litera – klasa 2</h1>
        <div class="text-section" id="textSection">
        </div>
        <div class="buttons">
            <button class="green" onclick="checkAnswers()">Sprawdź</button>
            <button class="blue" onclick="generateText()">Nowe zdanie</button>
            <button class="yellow" onclick="window.location.href='ortografia.html'">Powrót do Ortografii</button>
        </div>
        <div class="summary" id="summary"></div>
    </div>

    <script>
        let library = [];
        let currentData = {};

        async function loadLibrary() {
            const response = await fetch('library_wielka_mala_litera.json');
            library = await response.json();
            generateText();
        }

        function generateText() {
            const section = document.getElementById('textSection');
            const summary = document.getElementById('summary');
            summary.innerText = "";
            section.innerHTML = "";

            const index = Math.floor(Math.random() * library.length);
            currentData = library[index];

            const paragraphs = currentData.text.split('|');
            paragraphs.forEach((sentence, i) => {
                const select = document.createElement("select");
                select.id = "input_" + i;
                currentData.options[i].forEach(opt => {
                    const option = document.createElement("option");
                    option.value = opt;
                    option.text = opt;
                    select.appendChild(option);
                });

                const span = document.createElement("span");
                span.innerText = sentence.replace("___", "");
                section.appendChild(document.createTextNode(sentence.split("___")[0]));
                section.appendChild(select);
                section.appendChild(document.createTextNode(sentence.split("___")[1] + " "));
            });
        }

        function checkAnswers() {
            let correct = 0;
            let total = currentData.correct.length;
            currentData.correct.forEach((ans, i) => {
                const input = document.getElementById("input_" + i);
                if (input.value === ans) {
                    input.className = "correct";
                    correct++;
                } else {
                    input.className = "incorrect";
                }
            });

            const summary = document.getElementById('summary');
            summary.innerText = `Liczba błędów: ${total - correct}`;
        }

        loadLibrary();
    </script>
</body>
</html>
